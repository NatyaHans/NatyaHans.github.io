---
title: 'Swap error or disk usage error'
date: 2022-03-11
permalink: /posts/2022/03/Inodes
tags:
  - swap error
  - bash
  - linux
  - inode
  - disk usage error
---



Swap error or disk usage error.

If you ever get an error that your disk usage is full and you are unable to create a new file, the first place to check is the diskusage using the command:

```
 du -sh 
```
This gives you the total disk usage for a directory. If you want to check individual folders and files within the directory, add the wildcard

```
du -sh *
```

The second place is to check your editor settings, chances are that you have created a swap file with same name and this needs to be deleted.
But if your disk usage is not full and you are still unable to create a new file, and it still gives you swap error, chances are your inode files are full. 
This can happen when you have a program running that is creating a lot of temporary files which are 0 bytes (This happened to me, hence the blog).

Inode
====
[Inode](https://en.wikipedia.org/wiki/Inode) is a index node in Unix system that keeps track of files and directory in your system. 
Each file ever created in a unix based system has a unique inode number.
This is how the file descriptors, file tables and inode numbers are laid out in unix. 

![image](https://user-images.githubusercontent.com/49882391/157972449-86312f72-8b12-4df4-82b0-34a1da21754c.png)

Please click here to learn more about [inode](http://www.linfo.org/inode.html).
I personally think the wiki page is a great resource for beginners.

Checking inode number
====
To check for inode number for a file, in the terminal type:

```
ls -i
```

This will list all the files with their respective inode numbers. This is how the output will look like, with the first column as inode number and the second column is either the file name or folder name within that directory.
Notice how the folder 01-sequence and the file cleanUp.sh both have a unique inode number.
All the files within the folder 01-sequence also have an inode number.
```
162135661699203487 01-sequence		  
162135760433126919 cleanUp.sh		    
162135729009392318 findGenes.sh		  
162135661699216256 make-treeUltrametric.R
162135725721059734 Gene10.fasta	
162135661699215338 nexus2fasta_forSupermatrix.pl
```


The solution
====
The obvious solution is to delete those temporary files, but these can be a bit hard to find.
The command to use it is as follows:

```
find FOLDERPATHH -xdev -printf '%h\n' | sort | uniq -c | sort -k 1 -n
```

Make sure you replace FOLDERPATH by the folder for which you want to find the inode count. 
For example, if you want to find it for home folder replace FOLDERPATH by /

```
find / -xdev -printf '%h\n' | sort | uniq -c | sort -k 1 -n
```

Another example of folder path (my folder path actually) is as follows:

```
find /blue/burleigh/nhans -xdev -printf '%h\n' | sort | uniq -c | sort -k 1 -n
```

Let me further break 
